<div id="buildP_detail_page">
    <!--start-->
    <div id="buildP_detail_div" class="main-box p-1-5" style="display: block">
        <form class="form-horizontal" role="form" action="" method="post" id="addProduct_from" data-validator-option="{beforeSubmit:function(){return true;}}">
            <input id="id" name="id" value="" type="hidden">
            <input id="type" name="type" value="" type="hidden" >
            <div class="form-group ">
                <label class="control-label w-9" style="font-family: 微软雅黑;font-size: 16px">建筑名称：</label>
                <div class="w-20 ">
                    <input id="name"   class="form-control" data-rule="产品名称:required;"  type="text"  placeholder="请输入产品名称" maxlength="20">
                </div>
            </div>

            <div class="form-group ">
                <label class="control-label w-9" style="font-family: 微软雅黑;font-size: 16px">所属类别：</label>
                <div class="w-80 mt-0-5">
                    <ul class="y-product-includ-list clearfix" id="sort_ul">
                     </ul>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label w-9" style="font-family: 微软雅黑;font-size: 16px">建筑城区：</label>
                <div class="w-20 ">
                    <select class="form-control"  id="district">
                        <option value="1">黄浦</option>
                        <option value="2">徐汇</option>
                        <option value="3">长宁</option>
                        <option value="4">静安</option>
                        <option value="5">普陀</option>
                        <option value="6">虹口</option>
                        <option value="7">杨浦</option>
                        <option value="8">闵行</option>
                        <option value="9">宝山</option>
                        <option value="10">嘉定</option>
                        <option value="11">浦东</option>
                        <option value="12">金山</option>
                        <option value="13">松江</option>
                        <option value="14">青浦</option>
                        <option value="15">奉贤</option>
                        <option value="16">崇明</option>
                    </select>
                </div>
            </div>

            <div class="form-group ">
                <label class="control-label w-9" style="font-family: 微软雅黑;font-size: 16px">详细地址：</label>
                <div class="w-40 ">
                    <input id="address"   class="form-control" data-rule="详细地址:required;"  type="text"  placeholder="请输入详细地址" maxlength="50">
                </div>
                <!-- TODO-->
            </div>
            <div class="form-group ">
                <label class="control-label w-9" style="font-family: 微软雅黑;font-size: 16px">封面：</label>
                <div class="w-10 h-8">
                    <img class="w-10 h-8" src="/images/Btn_BodyFenxiangbBg.png" id="url"/>
                </div>
                <!-- TODO-->
            </div>

            <div class="form-group">
                <div class="w-55  float-none clearfix">
                    <ul class="alert-policy-01 pull-left clearfix" id="descs">
                     </ul>
                </div>
            </div>

            <div class="form-group ">
                <div class="roompic-upload ml-10 ">
                    <a id="add_desc" href="javascript:void(0);" class="form-btn-upload"><i class="icon-plus-sign"></i>添加具体描述</a>
                </div>
            </div>
            <div class="form-group">
                <div class="w-55  float-none clearfix">
                    <ul class="alert-policy-01 pull-left clearfix" id="details">
                    </ul>
                </div>
            </div>
            <div class="form-group ">
                <div class="roompic-upload ml-10">
                    <a id="add_detail" href="javascript:void(0);" class="form-btn-upload"><i class="icon-plus-sign"></i>添加建筑细节</a>
                </div>
            </div>

        </form>
        <div class="text-center mt-6 mb-2">
            <button id="addProduct_button" class="btn btn-success w-14 float-none  operation_button" data-value="1" type="button">发布</button>
        </div>

    </div>


<!--    &lt;!&ndash; 表格共通&ndash;&gt;
    <script src="js/table-ajax.js"></script>-->
    <!--私有js-->
    <script  >
        initBefore();
        function initBefore(){
            var sorts = buildClient.findSorts(new Sort(),new Page() );
            sorts=sorts.data;
            for(var i=0;i<sorts.length;i++){
                $('#sort_ul').append('<li class="w-9-5"><label style="font-weight: 100">' +
                        '<input type="checkbox" name="sort_name" id="'+sorts[i].name+'" >  value="'+sorts[i].name+'" >' +
                        '&nbsp;&nbsp;'+sorts[i].name+'</label></li> ');
            }
            // url 监听
            var  fileupload   =new fileUploadInit({});
            var o ={filename_type:'buildUrl', pickId:'url', displayId:'url'};
            o.callback   = function (up, info, displayId) {
                console.log(info);
                var res = JSON.parse(info);
                var key = encodeURI(res.key);
                res = Domain  + key  ;
                $("#url").attr('src',res);
            }
            fileupload.addfixed(o);
        }

            $("#add_desc").on('click',function(){
                $("#descs").append('<li class="alert alert-dismissable"> ' +
                        '<strong> ' +
                        '<label class="control-label w-9" style="font-family: 微软雅黑;font-size: 16px">描述标题：</label> ' +
                        '<div class="w-40"> ' +
                        '<input  name="desc_t"   class="form-control" type="text" placeholder="请输入描述标题" maxlength="20"> ' +
                        '</div> ' +
                        '<label class="control-label w-9 mt-1" style="font-family: 微软雅黑;font-size: 16px">描述内容：</label> ' +
                        '<div class="w-40 mt-1"> ' +
                        '<textarea  name="desc_b"  class="form-control" style="height: 50px;font-size: 12px" placeholder="请输入描述内容" maxlength="256"></textarea> ' +
                        '</div> ' +
                        '<button type="button" class="close closefirst" data-dismiss="alert"></button> ' +
                        '</strong> ' +
                        '</li>');
            })


            $("#add_detail").on('click',function(){
                $("#details").append('<li class="alert alert-dismissable"> ' +
                        '<strong> ' +
                        '<label class="control-label w-9" style="font-family: 微软雅黑;font-size: 16px">细节名称：</label> ' +
                        '<div class="w-40"> ' +
                        '<input  name="detail_t"   class="form-control" type="text" placeholder="请输入细节名称" maxlength="20"> ' +
                        '</div> ' +
                        '<label class="control-label w-9 mt-1" style="font-family: 微软雅黑;font-size: 16px">细节描述：</label> ' +
                        '<div class="w-40 mt-1"> ' +
                        '<textarea  name="detail_b"  class="form-control" style="height: 50px;font-size: 12px" placeholder="请输入细节描述" maxlength="256"></textarea> ' +
                        '</div> ' +
                        '<label class="control-label w-9 mt-1" style="font-family: 微软雅黑;font-size: 16px">细节图片：</label> ' +
                        '<div class="w-40 mt-1"> ' +
                        '<ul class="alert-policy-01 pull-left clearfix"  id="pic_ul_1" name="6">'+
                        '<li class="alert alert-dismissable"> ' +
                        '<strong> <img src="/images/Btn_BodyFenxiangbBg.png" alt="" width="90" height="90"> ' +
                        '<button type="button" class="close" data-dismiss="alert"></button> ' +
                        '</strong> </li>'+
                        '</ul> ' +
                        '<div class="roompic-upload w-12"> <a  class="form-btn-upload"  id="pic_add_1" ><i class="icon-plus-sign"></i>添加照片</a>'+
                         '<div class="msg text-gray-lighter font-12">总共可以添加6张</div>'+
                        '</div>'+
                        '</div> ' +
                        '<button type="button" class="close closefirst" data-dismiss="alert"></button> ' +
                        '</strong> ' +
                        '</li>');

                var  fileupload   =new fileUploadInit({});
                var o ={filename_type:'buildDetail', pickId:'pic_add_1', displayId:'pic_url_display'};
                o.callback   = function (up, info, displayId) {
                    console.log(info);
                    var res = JSON.parse(info);
                    var key = encodeURI(res.key);
                    res = Domain  + key  ;
                    $("#pic_ul_1").append('<li class="alert alert-dismissable"> ' +
                            '<strong> <img src="'+res+'" alt="" width="60" height="60"> ' +
                            '<button type="button" class="close" data-dismiss="alert"></button> ' +
                            '</strong> </li>');
                }
                fileupload.addfixed(o);
            })

        if(id_select){
            //mod
            var build = buildClient.findBuild(id_select);
            init(build);
        }else{
            init();
        }

        function init(data){
            if(data){
                $('#name').val(data.name);
                if(data.sort){
                    var sorts = data.sort.split(',');
                    for(var i=0;i<sorts.length;i++){

                    }
                }
                $('#name').val(data.name);
                $('#name').val(data.name);


            }
        }

        function initDeail(datas){
            var count =1;
            if(datas && datas.length>0){
                for(var i=0;i<datas.length;i++){

                }
            }
        }

        function doUrl(map,ul_id){
            for(var key in map){
                if(key.indexOf('url')==0&&map[key]){
                    $('#'+ul_id).append('<li class="alert alert-dismissable"> ' +
                            '<strong> <img src="'+Domain+map[key]+'" alt="" width="60" height="60"> ' +
                            '<button type="button" class="close" data-dismiss="alert"></button> ' +
                            '</strong> </li>');
                }
            }
        }




    </script>
    <!--end-->
</div>